(window.webpackJsonp=window.webpackJsonp||[]).push([[18,3,8],{42:function(t,e,r){"use strict";r.d(e,"a",function(){return s});var i=r(1),n=r(5),a=r(9);r.d(e,"b",function(){return n.c}),r.d(e,"c",function(){return n.d});const s=Object(n.f)({baseURL:"https://conduit.productionready.io/api",cors:!0,headers:i.pureComputed(()=>a.a.loggedIn()?{Authorization:`Token ${a.a.token}`}:{})})},43:function(t,e,r){"use strict";r.d(e,"a",function(){return o});var i=r(1),n=r(5),a=r(42),s=r(9);class o extends(n.a.Mixin(Object(a.a)("profiles/:username")).Mixin(Object(a.b)("profile"))){constructor(){super(...arguments),this.following=i.observable(!1),this.paths={profile:`//profile/${this.params.username}`,favorites:`//profile/${this.params.username}/favorites`},this.isCurrentUser=i.pureComputed(()=>s.a.loggedIn()&&s.a.username()===this.username)}async toggleFollowing(){const t={params:{username:this.params.username}},e=this.following()?"delete":"post";await this.api[e]("follow",t),this.following.toggle()}}},44:function(t,e,r){"use strict";var i=r(1);i.observable.fn.increment=i.computed.fn.increment=function(t){!function(t,e){void 0===e&&(e=1);t(t()+e)}(this,t)},i.observable.fn.decrement=i.computed.fn.decrement=function(t){!function(t,e){void 0===e&&(e=1);t(t()-e)}(this,t)},i.observable.fn.toggle=i.computed.fn.toggle=function(){this(!this())};var n=r(5),a=r(42),s=r(43),o=r(9);r.d(e,"a",function(){return c}),r.d(e,"c",function(){return l}),r.d(e,"d",function(){return f}),r.d(e,"b",function(){return h});const u=10;class c extends(n.a.Mixin(Object(a.a)("articles/:slug?")).Mixin(Object(a.c)(d)).Mixin(Object(a.b)("article"))){constructor(){super(...arguments),this.favorited=ko.observable(!1),this.favoritesCount=ko.observable(0),this.paths={show:`//article/${this.params.slug}`,edit:`//editor/${this.params.slug}`}}async toggleFavorite(){const t={params:{slug:this.params.slug}},e=this.favorited()?"delete":"post";await this.api[e]("favorite",t),this.favorited.toggle(),this.favorited()?this.favoritesCount.increment():this.favoritesCount.decrement()}}class l extends c{constructor(){super(...arguments),this.title=ko.observable(""),this.description=ko.observable(""),this.body=ko.observable(""),this.tagList=ko.observableArray()}}class f extends l{constructor(){super({},{article:{author:o.a.toJS(),body:"",description:"",title:""}})}}class h extends(n.a.Mixin(Object(a.a)("articles/feed?")).Mixin(Object(a.c)(p)).Mixin(Object(n.b)("articles",g))){constructor(){super(...arguments),this.articles=ko.observableArray()}}async function p(t){const e=await Promise.all(t.articles.map(t=>c.create({slug:t.slug},{article:t})));return{...t,articles:e}}async function d(t){const e=await s.a.create({username:t.article.author.username},{profile:t.article.author});return{article:{...t.article,author:e}}}function g(t){return{limit:u,offset:u*(t-1)}}},45:function(t,e){t.exports='<ul class=tag-list> {{#foreach tags}} <a class="tag-default tag-pill tag-outline" data-bind="path: path"> {{text}} </a> {{/foreach}} {{#if numMore}} and {{numMore}} more... {{/if}} </ul>'},46:function(t,e){t.exports='{{#foreach articles.articles}} <div class=article-preview> <div class=article-meta> <a data-bind="path: author.paths.profile"><img src={{author.image}} /></a> <div class=info> <a data-bind="path: author.paths.profile" class=author>{{author.username}}</a> <span class=date>{{createdAt | date.format:\'MMMM D, YYYY\' }}</span> </div> <button class="btn btn-sm pull-xs-right" data-bind="\n          click: toggleFavorite,\n          css: favorited() ? \'btn-primary\': \'btn-outline-primary\'\n        "> <i class=ion-heart></i> {{favoritesCount}} </button> </div> <a data-bind="path: paths.show" class=preview-link> <h1>{{title}}</h1> <p>{{description}}</p> <span>Read more...</span> <tag-list params="tags: tagList, limit: 4"></tag-list> </a> </div> {{/foreach}} {{#if articles.hasMore}} <button class="btn btn-outline-primary" data-bind="click: articles.getMore">Load more articles...</button> {{/if}}'},47:function(t,e,r){"use strict";var i=r(1);function n(t){return"boolean"==typeof t}function a(t){return!isNaN(parseFloat(t))}function s(t){return void 0===t}function o(t){return Object.keys(t).map(function(e){return[e,t[e]]})}function u(t,e){for(var r={},i=0,n=o(t);i<n.length;i++){var a=n[i],s=a[0],u=a[1];e(u)||(r[s]=u)}return r}var c=function(){function t(e,r){this._group=r,s(t._raw[this._group])?(t._raw[this._group]={},t._refs[this._group]=1):t._refs[this._group]++,this.set(e)}return t.prototype.set=function(e){var r=this,n=Object.assign({},t.getDefaults(e)),a=this._group,u=t.fromQS(a);o(e).forEach(function(e){var i=e[0],o=e[1],c=void 0===o?{}:o;if(r[i]=t._raw[a][i],s(r[i])){var l=n[i],f=c.coerce||function(t){return t},h=s(u[i])?c.initial:u[i];r[i]=t._raw[a][i]=t.createQueryParam(a,i,l,h,f)}else r[i].set(c)}),i.tasks.runEarly()},t.prototype.toJS=function(){return u(i.toJS(t._raw[this._group]),s)},t.prototype.toString=function(){return t.stringify(this.toJS())},t.prototype.asObservable=function(){var t=this;return i.pureComputed(function(){return t.toJS()})},t.prototype.clear=function(){var e=this;Object.keys(t._raw[this._group]).forEach(function(r){return t._raw[e._group][r].clear()})},t.prototype.dispose=function(){if(0==--t._refs[this._group]){var e=Object.assign({},t.fromQS(),t.getCleanQuery());delete e[this._group],t.writeQueryString(e),delete t._raw[this._group]}},t.parse=function(e){return t._parser.parse(e)},t.stringify=function(e){return t._parser.stringify(e)},t.create=function(e,r){return new t(e,r)},t.setParser=function(e){t._parser=e},t.getQueryString=function(){var t=/\?([^#]*)/.exec(location.search+location.hash);return t?t[1]:""},t.fromQS=function(t){var e=this.parse(this.getQueryString());return(s(t)?e:e[t])||{}},t.getCleanQuery=function(){for(var e={},r=0,c=o(t._raw);r<c.length;r++){var l=c[r],f=l[0],h=l[1];e[f]=i.toJS(u(h,function(t){return t.isDefault()||s(t())||0===t().length&&!a(t())&&!n(t())}))}return e[void 0]&&(Object.assign(e,e[void 0]),delete e[void 0]),e},t.writeQueryString=function(e){e||(e=this.getCleanQuery());var r,i=t.stringify(e),n=location.pathname+location.search+location.hash;if(n.indexOf("#!")>-1)r=n.replace(/(?:\?[^#]+|$)/,i?"?"+i:"");else{var a=/([^?#]*)/.exec(n)[1],s=/(#[^!]*)/.exec(n);r=a,i&&(r+="?"+i),s&&(r+=s[1])}history.replaceState(history.state,document.title,r)},t.queueQueryStringWrite=function(){var e=this;return this._queuedUpdate||(this._queuedUpdate=new Promise(function(r){i.tasks.schedule(function(){t.writeQueryString(),r(),e._queuedUpdate=!1})})),this._queuedUpdate},t.createQueryParam=function(e,r,n,a,o){var u=this,c=i.observable(i.toJS(n)),l=i.observable(s(a)?c():a),f=i.pureComputed(function(){return h()===c()}),h=i.pureComputed({read:function(){return l()},write:function(e){s(e)&&(e=c()),o&&(e=o(e)),l(e),t.queueQueryStringWrite().catch(function(t){return console.error("[@profiscience/knockout-contrib-querystring] error queueing write")})}});return Object.assign(h,{isDefault:f,set:function(t){u.isParamConfigObject(t)?((t=t).coerce&&(o=t.coerce),(f()||s(h())||!s(t.initial))&&h(s(t.initial)?t.default:t.initial),t.default&&c(t.default)):(t=t,(f()||s(h()))&&h(t),c(t))},clear:function(){return h(c())}}),h},t.isParamConfigObject=function(t){return t&&(t.default||t.initial||t.coerce)},t.getDefaults=function(t){var e=this,r={};return o(t).forEach(function(t){var i=t[0],n=t[1];return r[i]=e.isParamConfigObject(n)?n.default:n}),r},t._raw={},t._refs={},t._parser={parse:function(t){return JSON.parse(decodeURIComponent(t||"{}"))},stringify:function(t){return"{}"===JSON.stringify(t)?"":encodeURIComponent(JSON.stringify(t))}},t}();e.a=c},50:function(t,e,r){"use strict";r.r(e);var i=r(45),n=r.n(i),a=r(47);class s{constructor(t){this.numMore=0,this.tags=function(t,e){if(!e||t.length<e)return t;const r=[];for(let i=0;i<e;i++)r.push(t[i]);return r}(t.tags,t.limit).map(t=>({text:t,path:`//?${a.a.stringify({feed:"tag",tag:t})}`})),t.limit&&t.tags.length>t.limit&&(this.numMore=t.tags.length-t.limit)}}r.d(e,"template",function(){return n.a}),r.d(e,"viewModel",function(){return s})},51:function(t,e,r){"use strict";r.r(e);var i=r(46),n=r.n(i);r(48);class a{constructor(t){this.articles=t.articles}}r.d(e,"template",function(){return n.a}),r.d(e,"viewModel",function(){return a})},64:function(t,e,r){"use strict";r.r(e);var i=r(1),n=r(5),a=r(47),s=r(44),o=r(42);var u=r(9);r(51),r(50),e.default=class extends n.e{constructor(){super(...arguments),this.currentUser=u.a,this.query=new a.a({feed:u.a.loggedIn()?"user":"global",tag:""}),this.articles=new s.b({feed:i.pureComputed(()=>"user"===this.query.feed()),tag:this.query.tag}),this.tags=new class extends(n.a.Mixin(Object(o.a)("tags"))){}({}),this.showTabs=i.pureComputed(()=>u.a.loggedIn()||"tag"===this.query.feed()),this.isGlobalFeed=i.pureComputed(()=>"global"===this.query.feed()),this.isUserFeed=i.pureComputed(()=>"user"===this.query.feed())}showGlobalFeed(){this.query.clear(),this.query.feed("global")}showUserFeed(){this.currentUser.loggedIn()&&(this.query.clear(),this.query.feed("user"))}showTag(t){this.query.feed("tag"),this.query.tag(t)}}}}]);