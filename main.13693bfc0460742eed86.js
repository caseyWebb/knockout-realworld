(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{17:function(e,t){e.exports='<nav class="navbar navbar-light"> <div class=container> <a class=navbar-brand data-bind="path: \'//\'">conduit</a> <ul class="nav navbar-nav pull-xs-right"> <li class=nav-item> <a class=nav-link data-bind="path: \'//\'">Home</a> </li> {{#if currentUser.loggedIn}} <li class=nav-item> <a class=nav-link href="" data-bind="path: \'//editor\'"> <i class=ion-compose></i>&nbsp;New Post </a> </li> <li class=nav-item> <a class=nav-link href="" data-bind="path: \'//settings\'"> <i class=ion-gear-a></i>&nbsp;Settings </a> </li> <li class=nav-item> <a class=nav-link href="" data-bind="click: currentUser.logout"> <i class=ion-log-out></i>&nbsp;Log out </a> </li> {{/if}} {{#ifnot currentUser.loggedIn}} <li class=nav-item> <a class=nav-link data-bind="path: \'//login\'">Sign in</a> </li> <li class=nav-item> <a class=nav-link data-bind="path: \'//register\'">Sign up</a> </li> {{/ifnot}} </ul> </div> </nav> <div class=container> <contrib-flash-message></contrib-flash-message> </div>'},18:function(e,t){e.exports="<footer> <div class=container> <a data-bind=\"path: '/'\" class=logo-font>conduit</a> <span class=attribution> An interactive learning project from <a href=https://thinkster.io>Thinkster</a>. Code &amp; design licensed under MIT. </span> <span style=float:right> <a href=https://github.com/caseyWebb/knockout-realworld> View the source on GitHub &nbsp; <i class=ion-social-github></i> </a> </span> </div> </footer>"},25:function(e,t,n){"use strict";n.r(t);var a={};n.d(a,"template",function(){return r.a}),n.d(a,"synchronous",function(){return c});var o={};n.d(o,"template",function(){return d.a}),n.d(o,"viewModel",function(){return b}),n.d(o,"synchronous",function(){return g});var s=n(1),i=n(2),l=(n(27),n(26),n(18)),r=n.n(l);const c=!0;var u=n(17),d=n.n(u),p=n(5),h=n(9);class b extends p.e{constructor(){super(...arguments),this.currentUser=h.a}}const g=!0;var f=n(12);s.components.register("app-footer",a),s.components.register("app-header",o),s.components.loaders.unshift(new f.a({"article-form":()=>n.e(9).then(n.bind(null,63)),"article-list":()=>Promise.all([n.e(0),n.e(8)]).then(n.bind(null,51)),"article-meta":()=>Promise.all([n.e(0),n.e(7)]).then(n.bind(null,61)),"comment-form":()=>n.e(6).then(n.bind(null,68)),"comment-list":()=>Promise.all([n.e(0),n.e(5)]).then(n.bind(null,69)),"login-form-errors":()=>n.e(4).then(n.bind(null,62)),"tag-list":()=>n.e(3).then(n.bind(null,50))}));var v=n(10),m=n(3);i.b.setConfig({hashbang:!0,activePathCSSClass:"active",base:"/knockout-realworld"}).use(v.b),i.a.usePlugin(m.e,m.c,m.d,m.b);var w=new i.a("/article/:slug",{component:()=>({template:n.e(11).then(function(){var e=n(83);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}),viewModel:n.e(10).then(n.bind(null,65))})}),y=new i.a("/",{async redirect(){if(await h.a[m.a],h.a.loggedIn())return"//"},component:()=>({viewModel:n.e(14).then(n.bind(null,82)),template:"<router></router>"}),children:[new i.a("/login",{component:()=>n.e(13).then(n.bind(null,66))}),new i.a("/register",{component:()=>n.e(12).then(n.bind(null,67))})]}),j=new i.a("/",{component:()=>({template:n.e(15).then(function(){var e=n(81);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})})})}),S=new i.a("/:slug",{component:()=>({template:n.e(17).then(function(){var e=n(80);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}),viewModel:n.e(16).then(n.bind(null,79))})}),k=new i.a("/editor",{children:[j,S]}),M=new i.a("/",{component:()=>({template:n.e(19).then(function(){var e=n(78);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}),viewModel:Promise.all([n.e(0),n.e(18)]).then(n.bind(null,64))})}),_=new i.a("/",{component:()=>({template:n.e(21).then(function(){var e=n(77);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}),viewModel:n.e(20).then(n.bind(null,76))})}),I=new i.a("/favorites",{component:()=>({template:n.e(23).then(function(){var e=n(75);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}),viewModel:n.e(22).then(n.bind(null,74))})}),O=new i.a("/profile/:username",{component:()=>({template:n.e(25).then(function(){var e=n(73);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}),viewModel:n.e(24).then(n.bind(null,72))}),children:[_,I]}),U=new i.a("/settings",{component:()=>({template:n.e(27).then(function(){var e=n(71);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}),viewModel:n.e(26).then(n.bind(null,70))})});i.b.useRoutes([w,y,k,M,O,U]),window.ko=s,s.options.deferUpdates=!0,s.punches.enableAll(),s.applyBindings({isNavigating:i.b.isNavigating})},9:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(1),o=n(5),s=n(3);const i=a.observable(),l=Object(o.f)({baseURL:"https://conduit.productionready.io",cors:!0,headers:i});const r=new class extends(o.a.Mixin(l("api"))){constructor(){super({}),this.email=a.observable(""),this.username=a.observable(""),this.loggedIn=a.observable(!1),Object(o.g)(this,"loggedIn"),this.sync()}get localStorage(){const e=localStorage.getItem("CURRENT_USER");return e?JSON.parse(e):null}set localStorage(e){e?localStorage.setItem("CURRENT_USER",JSON.stringify(e)):localStorage.removeItem("CURRENT_USER")}async fetch(){return this.localStorage?{...this.localStorage,loggedIn:!0}:{loggedIn:!1,token:void 0,email:void 0,username:void 0}}async save({password:e}={}){const{user:t}=await this.api.put("user",{data:{...this.toJS(),password:e}});this.localStorage=t,await this.update()}async register(e){const t=await this.api.post("users",{data:{user:e}});this.localStorage=t.user,await this.update()}async login(e){const{user:t}=await this.api.post("users/login",{data:{user:e}});this.localStorage=t,await this.update()}async logout(){this.localStorage=void 0,await this.update()}async sync(){await this[s.a],this.loggedIn()&&(i({Authorization:`Token ${this.token}`}),this.api.get("user").then(({user:e})=>{this.localStorage=e,this.update()}).catch(e=>{console.error("Failed to fetch updated current user",e)}))}}}},[[25,28,29]]]);